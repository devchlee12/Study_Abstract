이 페이지가 다루는 내용
- 객체를 만들어야할 때, 만들지 말아야할 때를 구분하는 법
- 올바른 객체 생성 방법, 어떻게 불필요한 생성 피하는지
- 제때 파괴됨을 보장하는법
- 파괴 되기 전 정리 작업 관리 요령
### 아이템1. 생성자 대신 정적 팩토리 메소드를 고려하라
클래스를 생성할 때, 정적 팩토리 메소드를 사용하는 것이 좋을 때가 있다.
- 정적 팩토리 메소드란, 클래스의 인스턴스를 반환하는 단순한 정적 메소드
	- 예를 들어, Boolean에서 Boolean.valueOf()이 정적 팩토리 메소드이다
정적 팩토리 메소드를 사용하면 어떤 부분이 좋길래 사용해야 할까?
1. 이름을 가질 수 있다.
	1. 여러 생성자가 필요할 때가 있는데, 그럴 때 여러 생성자를 만든답시고 생성자의 시그니처만 바꿔서 여러개를 등록해 놓는다면 각 생성자가 어떤 의미인지 파악하기 힘들다. 이 문제는 정적팩토리 메소드를 이용하면 해결된다.
2. 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다
	1. 인스턴스를 만들어 놓거나, 캐싱하여 재활용하는 식으로 불필요한 객체 생성 피할 수 있다.
3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.
	1. 하위 타입 객체를 반환하는 것을 통해 반환 객체의 클래스를 자유롭게 선택할 수 있다. 이게 필요한 이유는, 모든 구현클래스를 노출시킨다면 API의 크기가 너무 커지기 때문이다.
	2. 예를들어, Collections 클래스에서 구현체들을 모두 정적 팩토리 메소드를 통해 얻는 것을 통해 45개의 구현 클래스를 노출시키지 않을 수 있었다.
4. 입력 매개변수에 따라 매번 다른 클래스의 객체 반환 가능하다
	1. 매개변수가 0-10이면 A,10-20이면 B 처럼 값아 따라 자유롭게 반환할 수 있다.
	2. 클라이언트는 반환되는 클래스들의 존재를 모르기 때문에, 다음 릴리즈 떄 자유롭게 변경할 수 있다.
5. 정적 팩토리 메소드 작성 시점에는 반환할 클래스가 존재하지 않아도 된다.
	1. ServiceLoader.load(XXX.class)를 예로 들어보자, 이는 XXX.class 인터페이스를 구현하고, META-INF에 등록된 모든 구현체들을 가져온다. 이 팩토리메소드는 구현체가 아직 존재하지 않아도 작성할 수 있다.
	2. 그래서 이게 왜 좋은지 예를 들어보자면, DB드라이버를 추가하고 싶을 때 코드를 수정할 필요가 없기 때문이다. 그냥 DB드라이버를 구현하고, META-INF에 등록하면 끝이다.

그렇다면 생성자 대신 정적 팩토리메소드를 무조건 사용해야할까? 

그건 아니다.  

정적 팩토리 메소드를 사용할 때의 주의사항을 알아보자.
- 상속을 하려면 public이나 protected 생성자가 필요하니, 정적 팩토리 메소드만 제공하면 하위 클래스를 만들 수 없다
	- 상속대신 컴포지션을 사용하게 하니까 오히려 좋다고 볼수도 있다.
- 정적 팩토리 메소드는 프로그래머가 찾기 어렵다
	- 인스턴스를 만들고 싶은데, 뭐가 정적 팩토리인지 알기 힘들다는 뜻
	- 그래서 정적 팩토리 메소드의 이름은 잘 알려진 규약에 맞추어 짓는다
		- from,of,valueOf,getInstance,newInstance,getType,newType,type
### 아이템2. 생성자에 매개변수가 많다면 빌더를 고려하라

정적 팩토리 메소드나 생성자를 사용하면, 선택 매개변수가 많을 때 문제가 생길 수 있다.

선택항목을 처리하기 위해 점층적 생성자 패턴을 사용할 수 있는데, 이는 원치 않는 매개변수도 설정해야한다는 단점이 존재하고, 클라이언트 코드를 작성하거나 읽기 어렵게 만든다.

그렇다면 자바빈즈 패턴을 사용하면 되지 않을까?

자바빈즈 패턴을 사용하면, 세터를 사용하여 읽기 쉬운 코드를 만들 수 있지만, 여러가지 문제가 생긴다.
- 객체가 완전히 생성되기 전까지 일관성이 무너진 상태에 놓인다.
- 클래스를 불변으로 만들 수 없고, 스레드 안정성을 위해 추가 작업을 해야한다.

빌더 패턴을 사용하면 이러한 문제들을 해결할 수 있다.
- 필수 매개변수로 빌더 객체를 얻고, 빌더 객체의 세터 메소드들로 원하는 선택 매개변수를 설정한 뒤, build메소드를 호출하여 객체를 얻게하면 된다.
- 이렇게하면 읽기 쉬우면서도 불변객체를 만들 수 있다.

build메소드가 호출하는 생성자에서 불변식을 검사하여 매개변수를 검증할 수도 있다.

빌더패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다
- 추상 클래스에는 추상 빌더를 작성하고, 구체 클래스에는 구체 빌더를 작성한다.
- 공변반환 타이핑을 통해 클라이언트는 형변환에 신경쓰지 않아도 된다

그렇다면 빌더에는 단점이 없을까?

단점도 당연히 존재한다.
- 객체를 만들기 전에 빌더를 만들어야 하므로, 성능에 민감한 상황에서는 문제가 될 수 있다.
- 코드가 장황한 편이라 매개변수가 4개 이상은 되어야 값어치를 한다.
	- api는 시간이 지날수록 매개변수가 많아지는 경향이 있으니 처음부터 빌더쓰는게 좋을수도 있다
