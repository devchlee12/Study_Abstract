### 이미지 vs 컨테이너
- 이미지
	- 컨테이너를 위한 청사진
	- 코드, 필요한 툴, 실행환경을 포함
	- read only
	- application data 포함 안됨
- 컨테이너
	- 실행중인 소프트웨어 단위
	- 하나의 이미지로 여러개의 컨테이너 생성 가능
	- read and write
	- 꺼지면 data 손실
### 이미지는 어떻게 구하지?
- 이미 존재하는 이미지 사용
	- 도커허브 이용
- 나만의 커스텀 이미지 만들기
	- 도커파일을 작성해서 만들 수 있음

### Dockerfile 사용해서 자체이미지 빌드하기
- Dockerfile 작성법
	- FROM
		- 베이스 이미지를 설정
		- 시스템에 존재하거나 도커허브에 존재하는 이름 지정
		- 예를 들어 FROM node라고 적으면, node이미지를 가져온다.
	- COPY
		- 로컬머신의 어떤 파일이 이미지에 들어가야하는지 지정
		- COPY '컨테이너 외부 로컬파일 경로' '컨테이너 내부 경로'
			- 예를 들어, COPY . /app 은
			- 현재 폴더에 있는 파일들(Dockerfile 제외)을 컨테이너 내부 /app 폴더에 저장
	- RUN
		- 이미지가 생성될 때 실행시키고 싶은 명령어
		- 작업 디렉토리는 컨테이너 파일시스템의 루트 폴더
	- WORKDIR
		- 명령어의 작업 디렉토리를 지정 가능
	- CMD
		- 컨테이너가 실행될 때 실행시키고 싶은 명령어
		- 배열로 전달
			- CMD \["node", "server.js"] 
	- EXPOSE
		- 로컬시스템에 노출할 포트를 적는 곳
		- CMD명령어의 이전에 작성해야한다
		- 사실 문서화 목적임
			- 실제로 기능은 없다
			- 없어도 딱히 기능에 문제는 없는데 권장
- docker build로 이미지 빌드
	-  docker build '이미지 저장할 곳'
		- docker build .
### 자체 이미지를 기반으로 컨테이너 실행하기
- docker run
	- docker run 'ID'
		- 전체 ID를 넣을 필요는 없고, 식별할 수 있을만큼만 넣어도 됨
	- 이미지기반으로 컨테이너 실행
	- p플래그
		- 로컬 포트와 컨테이너 포트 연결
- docker ps
	- 실행중인 컨테이너 조회
	- a옵션 주면 종료된 컨테이너도 조회 가능
- docker stop
	- docker stop 'name'
	- 컨테이너 종료
### 이미지는 읽기 전용이다!
- 도커이미지는 빌드되는 당시의 스냅샷을 저장한다
- 그래서 코드를 변경했다면 다시 빌드해서 이미지를 새로 만들어야 함

### 이미지 레이어 이해하기
- 이미지는 레이어 기반 아키텍처를 따른다
	- 도커 파일에 적혀있는 명령어들을 순서대로 실행하면서 레이어를 만듬
	- 이는 캐싱을 적용해서 빠르게 빌드할 수 있게하기 위함임
	- 어떤 레이어에서 변경이 발생하면 그 위의 레이어도 전부 다시 실행
		- 그래서 도커파일의 순서를 잘 조정해서 최적화 가능

### 컨테이너 중지, 재시작
- 중지한 컨테이너는 어떻게 시작할까?
	- docker run으로 실행하면 새로운 컨테이너가 실행됨
	- docker start로 재시작해야함
- 
